<!DOCTYPE html>
<html lang="en">
  <head>
    <link href="./../index.css" rel="stylesheet" />

    <script type="text/javascript" src="./../StaticDB/ProductsDB.js"></script>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Product Page</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
      integrity="sha384-1BmE4kWBq78iYhFldvKuhfTAU6auU8tT94WrHftjDbrCEXSU1oBoqyl2QvZ6jIW3"
      crossorigin="anonymous"
    />
    <link href="./..index.css" rel="stylesheet" />

    <!-- Model viewer Script-->
    <script
      type="module"
      src="https://unpkg.com/@google/model-viewer/dist/model-viewer.min.js"
    ></script>
  </head>
  <body>
    <script type="module">
      import { App } from "./app.js";

      document.addEventListener("DOMContentLoaded", function () {
        const app = new App();
        window.app = app;
      });
    </script>

    <div class="row">
      <div class="row col-lg-6">
        <div
          style="height: 90%"
          class="col col col-lg-12"
          id="product-large-image"
        >
          <h1 id="product-name"></h1>
        </div>
        <div class="col col col-lg-7">

        </div>



        <div  style="justify-content: center;" class="col col col-lg-5">
          <div class="product-image-list">

                <div class="product-image-btn" id="product-image-1" >

                </div>
                <div  class="product-image-btn"  id="product-image-2"  >
                
                </div>
                <div class="product-image-btn"  id="product-image-3" >
                
                    
                
                </div>

                <script >

                    function updateModel(modelId) {

                                document.getElementById(
                                        "product-large-image"
                                         ).innerHTML = ` <model-viewer class="responsive"
                                         camera-controls alt="Model" src= "./../assets/${modelId}.glb" height="100%" width="100%" >
                                        </model-viewer/> `;
                            }
                </script>
                    


                
          </div>
        </div>
      </div>

      
    
      <div class="col col col-lg-6">
        <div>
          <h1>About it:</h1>
          <p id="product-about"></p>
        </div>
        <div>
          <h1>Dimensions:</h1>
          <p id="product-dimensions"></p>
        </div>
        <div>
          <h1>Details:</h1>
          <p id="product-details"></p>
        </div>

        <div id="view-in-your-space" onclick="onClickfun();">
          View in your space
        </div>

        <script>
          function onClickfun() {
            console.log(productId);
            window.location.href = "modelrenderer/?productId=" + productId;
          }
        </script>
      </div>
    </div>

    <script>
      urlp = [];
      s = location.toString().split("?");
      s = s[1].split("&");
      for (i = 0; i < s.length; i++) {
        u = s[i].split("=");
        urlp[u[0]] = u[1];
      }
      var productId = urlp["productId"];
      var productDetails;

      products.map((product) => {
        // console.log(product)
        if (product.id == productId) {
          console.log("this is product id", product);
          productDetails = product;
        } else {
          productDetails = null;
        }
        console.log(productDetails);
        if (productDetails != null) {
          document.getElementById(
            "product-name"
          ).innerHTML = `${product.name} `;
          //document.getElementById('product-large-image').innerHTML =` <img class="responsive" alt="product_image" src=${product.image[0]} width="500px" height="500px"   /> `;
          var path = "./../assets/" + productId + ".glb";
          console.log(path);
          document.getElementById(
            "product-large-image"
          ).innerHTML = ` <model-viewer class="responsive"
                    camera-controls alt="Model" src= "./../assets/${productId}.glb" height="100%" width="100%" >
                </model-viewer/> `;

          document.getElementById(
            "product-about"
          ).innerHTML = `${product.about} `;
          document.getElementById(
            "product-dimensions"
          ).innerHTML = `${product.dimensions} `;
          document.getElementById(
            "product-details"
          ).innerHTML = `${product.details}`;
          document.getElementById(
            "product-image-1"
          ).innerHTML = `<img src=".${product.image[0]}" height="100px" width ="100px"/>`;

          document.getElementById(
            "product-image-2"
          ).innerHTML = `<img src=".${product.image[1]}" height="100px" width ="100px"/>`;

          document.getElementById(
            "product-image-3"
          ).innerHTML = `<img src=".${product.image[2]}" height="100px" width ="100px"/>`;

        

        }
      });




      var productImgOne = document.getElementById('product-image-1');
      var productImgTwo = document.getElementById('product-image-2');
      var productImgThree = document.getElementById('product-image-3');



 


      productImgOne.onclick = function() {
        productImgOne.style.backgroundColor = 'rgba(128, 128, 128, 0.281)'
        productImgTwo.style.backgroundColor = 'white';  
        productImgThree.style.backgroundColor = 'white';  
        updateModel(productId );
      };


      
      productImgTwo.onclick = function() {
        productImgTwo.style.backgroundColor = 'rgba(128, 128, 128, 0.281)'
        productImgOne.style.backgroundColor = 'white';  
        productImgThree.style.backgroundColor = 'white';  
        updateModel(productId + '_2');
      };

      
      productImgThree.onclick = function() {
        productImgThree.style.backgroundColor = 'rgba(128, 128, 128, 0.281)'
        productImgOne.style.backgroundColor = 'white';  
        productImgTwo.style.backgroundColor = 'white'; 
        updateModel(productId + '_3'); 
      };


    </script>
  </body>
</html>
